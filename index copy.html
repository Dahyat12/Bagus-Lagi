<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="./resources/ol.css">
        <link rel="stylesheet" href="resources/fontawesome-all.min.css">
        <link rel="stylesheet" type="text/css" href="resources/horsey.min.css">
        <link rel="stylesheet" type="text/css" href="resources/ol-search-layer.min.css">
        <link href="resources/photon-geocoder-autocomplete.min.css" rel="stylesheet">
        <link rel="stylesheet" href="./resources/ol-layerswitcher.css">
        <link rel="stylesheet" href="./resources/qgis2web.css">
        <link rel="stylesheet" href="./styles/costom.css">
        <style>
        html, body {
            background-color: #ffffff;
        }
        .ol-control > * {
            background-color: #ffffff!important;
            color: #4ed3d7!important;
            border-radius: 0px;
        }
        .ol-attribution a, .gcd-gl-input::placeholder, .search-layer-input-search::placeholder {
            color: #4ed3d7!important;
        }
        .search-layer-input-search {
            background-color: #ffffff!important;
        }
        .ol-control > *:focus, .ol-control >*:hover {
            background-color: rgba(255, 255, 255, 0.7)!important;
        } 
        .ol-control {
            background-color: rgba(255,255,255,.4) !important;
            padding: 2px !important;
        }
        .ol-full-screen {
            top: auto !important;
            bottom: 10px !important;
            left: 10px !important;
            right: auto !important;
        }
         </style>

        <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }
        

        </style>
        <title></title>
    </head>
    <body>
        <div id="map">
            <div id="popup" class="ol-popup">
                <a href="#" id="popup-closer" class="ol-popup-closer"></a>
                <div id="popup-content"></div>
            </div>
        </div>
        <script src="resources/qgis2web_expressions.js"></script>
        <script src="./resources/functions.js"></script>
        <script src="./resources/ol.js"></script>
        <script src="resources/horsey.min.js"></script>
        <script src="resources/ol-search-layer.js"></script>
        <script src="./resources/ol-layerswitcher.js"></script>
        <script src="resources/photon-geocoder-autocomplete.min.js"></script>
        <script src="layers/WPPIndonesia_2.js"></script><script src="layers/SHP_Kecamatan_Aceh_3.js"></script><script src="layers/WilayahPelabuhan_4.js"></script><script src="layers/PelabuhanAceh_5.js"></script>
        <script src="styles/WPPIndonesia_2_style.js"></script><script src="styles/SHP_Kecamatan_Aceh_3_style.js"></script><script src="styles/WilayahPelabuhan_4_style.js"></script><script src="styles/PelabuhanAceh_5_style.js"></script>
        <script src="./layers/layers.js" type="text/javascript"></script> 
        <script src="./resources/Autolinker.min.js"></script>
        <script src="./resources/qgis2web.js"></script>
        <script>
document.addEventListener('DOMContentLoaded', function() {
  if (typeof map === 'undefined') {
    console.warn("Map object tidak ditemukan (pastikan qgis2web.js sudah termuat)");
    return;
  }

  const style = document.createElement('style');
  style.textContent = `
    .fw-overlay {
      position: fixed; top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.35);
      z-index: 99999;
      display: flex; justify-content: center; align-items: center;
      padding: 20px;
    }
    /* === POPUP CONTAINER === */
.fw-popup {
  background: rgba(255, 255, 255, 0.7);
  max-width: 900px;
  width: calc(100% - 40px);
  max-height: calc(100vh - 80px);
  overflow-y: auto;
  border-radius: 12px;
  padding: 20px 25px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.35);
  font-family: 'Segoe UI', Roboto, Arial, sans-serif;
  color: rgba(30, 30, 30, 0.9);
}

/* === TABEL === */
.fw-popup table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 6px 8px; /* jarak antar baris */
}

/* === STYLE KOLOM (th dan td) === */
.fw-popup th,
.fw-popup td {
  background: rgba(0, 174, 255, 0.56) ;  /* hitam transparan */
  color: rgba(255, 255, 255, 0.95);    /* teks putih lembut */
  padding: 10px 14px;
  border-radius: 10px;
  font-size: 14px;
  line-height: 1.4em;
  transition: background 0.2s ease;
}

/* === KOLOM KIRI DAN KANAN === */
.fw-popup th {
  width: 42%;
  text-align: left;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.95);
}

.fw-popup td {
  width: 58%;
  text-align: center;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.9);
}

/* === JUDUL BAGIAN (seperti “Detail”, “Hasil Tangkapan…”) === */
.fw-section-title {
  background: rgba(0, 0, 0, 0.8);
  color: rgba(255, 255, 255, 0.95);
  text-align: center;
  font-weight: 700;
  border-radius: 8px;
  margin: 18px 0 12px 0;
  padding: 8px 10px;
  letter-spacing: 0.3px;
  font-size: 15px;
}

/* === TOMBOL TUTUP === */
.fw-close {
  padding: 10px 20px;
  background: rgba(0, 122, 255, 0.9);
  color: rgba(255, 255, 255, 0.95);
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.2s ease;
}

.fw-close:hover {
  background: rgba(0, 122, 255, 1);
}

  `;
  document.head.appendChild(style);

  // Fungsi tampilkan popup fullscreen
  function showFullscreenPopup(html) {
    document.querySelectorAll('.fw-overlay').forEach(e => e.remove());
    const overlay = document.createElement('div');
    overlay.className = 'fw-overlay';
    const popup = document.createElement('div');
    popup.className = 'fw-popup';
    popup.innerHTML = html + '<div style="text-align:center;"><button class="fw-close">Tutup</button></div>';
    overlay.appendChild(popup);
    document.body.appendChild(overlay);
    popup.querySelector('.fw-close').addEventListener('click', () => overlay.remove());
    overlay.addEventListener('click', e => { if (e.target === overlay) overlay.remove(); });
  }

  map.on('singleclick', function(evt) {
    let handled = false;
    let wilayahProps = null;
    let pelabuhanProps = null;
    
    map.forEachFeatureAtPixel(evt.pixel, function(feature, layer) {
      if (!layer) return;
      const layerTitle = (layer.get('title') || layer.get('popuplayertitle') || '').toLowerCase();
      
      if (layerTitle.includes('wilayah pelabuhan')) {
        wilayahProps = feature.getProperties();
        delete wilayahProps.geometry;
        handled = true;
      }
      if (layerTitle.includes('pelabuhan aceh')) {
        pelabuhanProps = feature.getProperties();
        delete pelabuhanProps.geometry;
      }
    });

    if (wilayahProps) {
      // Fungsi sembunyikan popup default agar tidak tampil sama sekali
      const popupContainer = document.getElementById('popup');
      if (popupContainer) popupContainer.style.display = 'none';

      const props = wilayahProps; pelabuhanProps;

        // Pembangun isi popup fullscreen
      var html = `
  <div style="text-align:center;">
    <h2 style="margin:0;">PP Sawang Bau</h2>
    <p style="font-size:14px;color:rgba(0,0,0,0.6);">
      Kecamatan Sawang, Kab. Aceh Selatan
    </p>
  </div>

  <div class="fw-section-title">Detail</div>

  <table>
    <tr><th>Desa</th><td>"Sawang Bau"</td></tr>
    <tr><th>Keterangan</th><td>-</td></tr>
    <tr><th>Status Pelabuhan</th><td>PP</td></tr>
    <tr><th>Posisi Pelabuhan</th><td>Pesisir</td></tr>
    <tr><th>Luas (Ha)</th><td>1.7 Ha</td></tr>
    <tr><th>Rencana Pembangunan</th><td>PPI</td></tr>
  </table>

  <div class="fw-section-title">Hasil Tangkapan Ikan Bulan September 2025</div>

  <table>
    <tr><th>Tongkol</th><td>32,32 TON</td></tr>
    <tr><th>Tuna</th><td>1,8 TON</td></tr>
    <tr><th>Cakalang</th><td>20,86 TON</td></tr>
    <tr><th>Layang</th><td>68,12 TON</td></tr>
    ${props.Kembung ? `<tr><th>Kembung</th><td>${props.Kembung}</td></tr>` : ''}
  </table>
      `;

        showFullscreenPopup(html);
      }
    });

    if (!handled) {
      const popupContainer = document.getElementById('popup');
      if (popupContainer) popupContainer.style.display = 'block';
    }


  console.log("✅ Popup fullscreen aktif hanya untuk Wilayah Pelabuhan");
});
</script>


        
    </body>
</html>
